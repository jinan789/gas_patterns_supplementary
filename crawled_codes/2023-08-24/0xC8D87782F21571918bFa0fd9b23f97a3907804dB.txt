// SPDX-License-Identifier: MIT
pragma solidity ^0.8.9;

import "@openzeppelin/contracts/token/ERC1155/IERC1155.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

import "hardhat/console.sol";

contract BatchTransferBLDR is Ownable {
    string public name = "Batch Transfer BLDR";
    string public symbol = "BT-NFT";

    IERC1155 public sandboxCollection;
    mapping(string => uint256) public codeToTokenId;

    // Mapping from character to token ID for each position
    mapping(uint256 => mapping(bytes1 => uint256)) public characterToTokenId;

    constructor(address _sandboxCollection) {
        sandboxCollection = IERC1155(_sandboxCollection);

        // characterToTokenId[1]["A"] = 0;
        characterToTokenId[1][
            "A"
        ] = 68445932870634034197578742840855993260306374816100593216701034676905784117248;

        // 2nd position characters
        characterToTokenId[2][
            "A"
        ] = 68445932870634034197578742840855993260306374816100593216701034676905767340032;
        // characterToTokenId[2][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905775728640;
        // characterToTokenId[2][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905784117248;
        // characterToTokenId[2][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906664921088;
        // characterToTokenId[2][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905792505856;
        // characterToTokenId[2][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905809283072;
        // characterToTokenId[2][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905817671680;
        // characterToTokenId[2][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905826060288;
        // characterToTokenId[2][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905834448896;
        // characterToTokenId[2][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905842837504;
        // characterToTokenId[2][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905851226112;
        // characterToTokenId[2][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905859614720;
        // characterToTokenId[2][
        //     "M"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905868003328;

        // 3rd position characters
        characterToTokenId[3][
            "A"
        ] = 68445932870634034197578742840855993260306374816100593216701034676905876391936;
        // characterToTokenId[3][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905884780544;
        // characterToTokenId[3][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905893169152;
        // characterToTokenId[3][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905901557760;
        // characterToTokenId[3][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905909946368;
        // characterToTokenId[3][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905918334976;

        // 4th position characters
        // characterToTokenId[4][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906673309696;
        // characterToTokenId[4][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906681698304;
        // characterToTokenId[4][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906690086912;
        // characterToTokenId[4][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906698475520;
        // characterToTokenId[4][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906706864128;
        // characterToTokenId[4][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906715252736;
        // characterToTokenId[4][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906757195776;
        // characterToTokenId[4][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906765584384;
        // characterToTokenId[4][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906723641344;
        // characterToTokenId[4][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906732029952;
        // characterToTokenId[4][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906740418560;
        // characterToTokenId[4][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906748807168;

        // // Special case for 5th position when character is 'A'
        // characterToTokenId[5]["A"] = 0; // Players should receive 4 NFTs
        // characterToTokenId[5][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905926723584;
        // characterToTokenId[5][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905935112192;

        // // Populate the mapping for the 6th position characters
        // characterToTokenId[6][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905943500800;
        // characterToTokenId[6][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905951889408;
        // characterToTokenId[6][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905960278016;
        // characterToTokenId[6][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905968666624;
        // characterToTokenId[6][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905977055232;
        // characterToTokenId[6][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905985443840;
        // characterToTokenId[6][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676905993832448;
        // characterToTokenId[6][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906002221056;
        // characterToTokenId[6][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906010609664;
        // characterToTokenId[6][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906018998272;
        // characterToTokenId[6][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906027386880;
        // characterToTokenId[6][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906035775488;

        // // Populate the mapping for the 7th position characters
        // characterToTokenId[7][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906857859072;
        // characterToTokenId[7][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906866247680;
        // characterToTokenId[7][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906874636288;
        // characterToTokenId[7][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906883024896;
        // characterToTokenId[7][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906891413504;

        // // Populate the mapping for the 8th position characters
        // characterToTokenId[8][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906790750208;
        // characterToTokenId[8][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906044164096;
        // characterToTokenId[8][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906782361600;
        // characterToTokenId[8][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906069329920;
        // characterToTokenId[8]["E"] = 0;
        // characterToTokenId[8][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906077718528;
        // // No token ID for 8th position character "E"

        // // Populate the mapping for the 9th position characters
        // characterToTokenId[9][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906086107136;
        // characterToTokenId[9][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906094495744;
        // characterToTokenId[9][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906102884352;
        // characterToTokenId[9][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906111272960;
        // characterToTokenId[9][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906119661568;
        // characterToTokenId[9][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906128050176;

        // // Populate the mapping for the 10th position characters
        // characterToTokenId[10][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906136438784;
        // characterToTokenId[10][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906144827392;
        // characterToTokenId[10]["C"] = 0;
        // characterToTokenId[10][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906153216000;
        // characterToTokenId[10][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906161604608;
        // characterToTokenId[10][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906169993216;
        // characterToTokenId[10][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906178381824;
        // characterToTokenId[10][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906186770432;
        // characterToTokenId[10][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906195159040;
        // characterToTokenId[10][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906203547648;
        // characterToTokenId[10][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906211936256;
        // characterToTokenId[10][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906220324864;

        // // 11th position characters
        // characterToTokenId[11][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906899802112;
        // characterToTokenId[11][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906908190720;
        // characterToTokenId[11]["C"] = 0;
        // characterToTokenId[11]["D"] = 0;
        // characterToTokenId[11]["E"] = 0;

        // // 12th position characters
        // characterToTokenId[12][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906228713472;
        // characterToTokenId[12][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906237102080;
        // characterToTokenId[12][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906245490688;
        // characterToTokenId[12][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906253879296;
        // characterToTokenId[12][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906262267904;
        // characterToTokenId[12]["F"] = 0;

        // characterToTokenId[13][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906270656512;
        // characterToTokenId[13][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906279045120;
        // characterToTokenId[13][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906287433728;
        // characterToTokenId[13][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906295822336;
        // characterToTokenId[13][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906304210944;
        // characterToTokenId[13][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906312599552;
        // characterToTokenId[13][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906320988160;
        // characterToTokenId[13][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906329376768;
        // characterToTokenId[13][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906337765376;
        // characterToTokenId[13][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906346153984;
        // characterToTokenId[13][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906354542592;
        // characterToTokenId[13][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906362931200;

        // // 14th position characters
        // characterToTokenId[14]["A"] = 0;
        // characterToTokenId[14]["B"] = 0;
        // characterToTokenId[14]["C"] = 0;
        // characterToTokenId[14]["D"] = 0;
        // characterToTokenId[14]["E"] = 0;

        // // 15th position characters
        // characterToTokenId[15][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906371319808;
        // characterToTokenId[15][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906379708416;
        // characterToTokenId[15][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906388097024;
        // characterToTokenId[15][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906396485632;
        // characterToTokenId[15][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906404874240;
        // characterToTokenId[15][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906413262848;
        // characterToTokenId[15][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906421651456;

        // // 16th position characters
        // characterToTokenId[16][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906430040064;
        // characterToTokenId[16][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906438428672;
        // characterToTokenId[16][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906446817280;
        // characterToTokenId[16][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906455205888;
        // characterToTokenId[16][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906463594496;
        // characterToTokenId[16][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906471983104;
        // characterToTokenId[16][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906480371712;
        // characterToTokenId[16][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906488760320;
        // characterToTokenId[16][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906497148928;
        // characterToTokenId[16][
        //     "J"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906505537536;
        // characterToTokenId[16][
        //     "K"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906513926144;
        // characterToTokenId[16][
        //     "L"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906522314752;

        // // 17th position characters
        // characterToTokenId[17]["A"] = 0;
        // characterToTokenId[17]["B"] = 0;
        // characterToTokenId[17]["C"] = 0;
        // characterToTokenId[17]["D"] = 0;
        // characterToTokenId[17]["E"] = 0;

        // // 18th position characters
        // characterToTokenId[18][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906530703360;
        // characterToTokenId[18][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906539091968;
        // characterToTokenId[18][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906547480576;
        // characterToTokenId[18][
        //     "D"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906555869184;
        // characterToTokenId[18][
        //     "E"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906564257792;
        // characterToTokenId[18][
        //     "F"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906572646400;
        // characterToTokenId[18][
        //     "G"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906581035008;
        // characterToTokenId[18][
        //     "H"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906589423616;
        // characterToTokenId[18][
        //     "I"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906597812224;

        // // 19th position characters
        // characterToTokenId[19][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906648143872;
        // characterToTokenId[19]["B"] = 0;
        // // Special case for 19th position when character is 'C'
        // characterToTokenId[19]["C"] = 0; // No token associated

        // // 20th position characters
        // characterToTokenId[20][
        //     "A"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906622978048;
        // characterToTokenId[20][
        //     "B"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906631366656;
        // characterToTokenId[20][
        //     "C"
        // ] = 68445932870634034197578742840855993260306374816100593216701034676906639755264;

        // // 21st position characters
        // characterToTokenId[21]["A"] = 0;
        // characterToTokenId[21]["B"] = 0;
        // characterToTokenId[21]["C"] = 0;
        // characterToTokenId[21]["D"] = 0;
        // characterToTokenId[21]["E"] = 0;
        // characterToTokenId[21]["F"] = 0;
        // characterToTokenId[21]["G"] = 0;
        // characterToTokenId[21]["H"] = 0;
        // characterToTokenId[21]["I"] = 0;
        // characterToTokenId[21]["J"] = 0;
        // characterToTokenId[21]["K"] = 0;
        // characterToTokenId[21]["L"] = 0;
    }

    function setERC1155Contract(address _erc1155Address) external onlyOwner {
        sandboxCollection = IERC1155(_erc1155Address);
    }

    function batchTransferFromCode(
        string memory uniqueCode,
        address to
    ) external payable onlyOwner {
        // require(bytes(uniqueCode).length == 21, "Invalid code length");
        uint256 length = bytes(uniqueCode).length;

        // uint256[] memory ids = new uint256[](21);
        // uint256[] memory amounts = new uint256[](21);

        uint256[] memory ids = new uint256[](3);
        uint256[] memory amounts = new uint256[](3);

        // for (uint256 i = 0; i < 21; i++) {
        for (uint256 i = 0; i < length; i++) {
            bytes1 char = bytes(uniqueCode)[i];

            // Adjusting index for position and fetching token ID
            ids[i] = characterToTokenId[i + 1][char];

            // Default amount
            amounts[i] = 1;

            // Special case for 5th character "A": Send 4 tokens
            if (i == 4 && char == "A") {
                amounts[i] = 4;
            }
            // Special case for 19th character "C": Send no token
            if (i == 18 && char == "C") {
                amounts[i] = 0;
            }
        }

        // console log ids
        for (uint256 i = 0; i < ids.length; i++) {
            console.log(ids[i]);
        }

        sandboxCollection.safeBatchTransferFrom(
            address(this),
            to,
            ids,
            amounts,
            ""
        );
    }
}